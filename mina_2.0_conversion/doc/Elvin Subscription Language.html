<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<BASE HREF="http://elvin.dstc.com/doc/esl4.html"><table border=1 width=100%><tr><td><table border=1 bgcolor=#ffffff cellpadding=10 cellspacing=0 width=100% color=#ffffff><tr><td><font face="" color=black size=-1>This is <b><font color=#0039b6>G</font> <font color=#c41200>o</font> <font color=#f3c518>o</font> <font color=#0039b6>g</font> <font color=#30a72f>l</font> <font color=#c41200>e</font></b>'s <a href="http://www.google.com/intl/en/help/features.html#cached"><font color=blue>cache</font></a> of <A HREF="http://elvin.dstc.com/doc/esl4.html"><font color=blue>http://elvin.dstc.com/doc/esl4.html</font></a> as retrieved on 10 Mar 2006 17:56:27 GMT.<br>
<b><font color=#0039b6>G</font> <font color=#c41200>o</font> <font color=#f3c518>o</font> <font color=#0039b6>g</font> <font color=#30a72f>l</font> <font color=#c41200>e</font></b>'s cache is the snapshot that we took of the page as we crawled the web.<br>
The page may have changed since that time.  Click here for the <A HREF="http://elvin.dstc.com/doc/esl4.html"><font color=blue>current page</font></a> without highlighting.<br>
This cached page may reference images which are no longer available. Click here for the <A HREF="http://72.14.203.104/search?q=cache:aPFuvASfvY4J:elvin.dstc.com/doc/esl4.html+elvin+subscription+language&hl=en&lr=&client=safari&strip=1"><font color=blue>cached text</font></a> only.<br>To link to or bookmark this page, use the following url: <code>http://www.google.com/search?q=cache:aPFuvASfvY4J:elvin.dstc.com/doc/esl4.html+elvin+subscription+language&amp;hl=en&amp;ct=clnk&amp;cd=1&amp;client=safari</code></font><br><br><center><font size=-2><i>Google is neither affiliated with the authors of this page nor responsible for its content.</i></font></center></td></tr>
<tr><td>
<table border=0 cellpadding=0 cellspacing=0><tr><td><font face="" color=black size=-1>These search terms have been highlighted:&nbsp;</font></td><td bgcolor=#ffff66><B><font face="" color=black size=-1>elvin&nbsp;</font></B></td><td bgcolor=#a0ffff><B><font face="" color=black size=-1>subscription&nbsp;</font></B></td><td bgcolor=#99ff99><B><font face="" color=black size=-1>language&nbsp;</font></B></td></tr></table>
</td></tr></table></td></tr></table>
<hr>

<!-- Copyright (C) Elvin Pty Ltd 1997-2002 -->
<html>
  <head>
    <title>Elvin Subscription Language</title>
    <link rel="SHORTCUT ICON" href="http://elvin.dstc.com/favicon.ico">
  </head>

  <body bgcolor="#ffffff" text="black" link="#E02828" vlink="#880000">

<!-- title_row (opt title_string) -->
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
    <td valign="top">
      <a href="http://elvin.dstc.com">
        <img src="http://elvin.dstc.com/images/logo-top-113x35.gif" 
             width="113"
             height="35"
             border="0" 
             alt="))X(("></a>
    </td>

    <td align="left" valign="top">
    	<img src="http://elvin.dstc.com/images/red-fade-383x35.gif" 
	     width="383"
             height="35"
             border="0"
             alt="(((((((((((((((( ( ( ( ( ( ( ( ( ( ( ( ( (">
    </td>
  </tr>

  <tr>
    <td valign="top">
       <a href="http://elvin.dstc.com">
       <img src="http://elvin.dstc.com/images/logo-bot-113x44.gif" 
             width="113"
             height="44"
             border="0" 
             alt="elvin"></a>
    </td>

    <td align="right" valign="middle">
      <H1><tt><b style="color:black;background-color:#ffff66">elvin</b> <b style="color:black;background-color:#a0ffff">subscription</b> <b style="color:black;background-color:#99ff99">language</b></tt></H1>
    </td>
  </tr>
</table>


<!-- nav bar begin -->
<table width="100%" border="0" cellpadding="10" cellspacing="0">
  <tr>
    <td valign="top">
      <table border="0"  cellpadding="0" cellspacing="0">
        <tr>
          <td nowrap valign="bottom">
            <code>

 |&nbsp;<a href="../index.html"><b style="color:black;background-color:#ffff66">elvin</a>
</b> |&nbsp;<a href="index.html">docs</a>
<!-- nav bar switch -->
            </code>
          </td>
          <td valign="bottom">
            <code>|</code>
          </td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td align="left" valign="top">
            <code>

 |&nbsp;<a href="papers/index.html">papers</a>
 |&nbsp;<a href="faq.html">faq</a>
 |&nbsp;<a href="news.html">news</a>
 |&nbsp;<a href="apis.html">apis</a>
 |&nbsp;<a href="spec/index.html">specs</a>
 |&nbsp;<a href="slides/index.html">slides</a>
 |&nbsp;<a href="guides/index.html">guides</a>
<!-- nav bar end -->
            </code>
          </td>
        </tr>
      </table>
    </td>
    <td valign="top" align="right">
      <form method="get" action="http://www.google.com/search">
	<input type="text" name="q" size="11" maxlength="255">
	<input type="hidden" name="domains" value="elvin.dstc.com">
	<input type="hidden" name="sitesearch" value="elvin.dstc.com">
      </form>
    </td>
  </tr>
</table>
<hr noshade size="2">




<p align="right"><em>The full syntax for specifying notification delivery</em><p>

<h3>Index</h3>

<ul>
<li> <a href="#intro">Introduction</a>
<li> <a href="#logic">Logic</a>
<li> <a href="#names">Names</a>
<li> <a href="#lits">Literals</a>
<!-- <li> <a href="#whitespace">Whitespace</a> -->
<li> <a href="#ops">Operators</a>
<li> <a href="#funcs">Functions</a>
<li> <a href="#strcomps">String Comparisons</a>
<li> <a href="#strtrans">String Transformations</a>
<li> <a href="#notif">Notification and Name Functions</a>
</ul>

<hr noshade size=2>

<a name="intro">
<h3> Introduction </h3>

<b style="color:black;background-color:#ffff66">Elvin</b> operates in a client-server architecture.  Clients register
subscriptions with the server and/or send notifications to it.  When the 
server receives a notification, it forwards it to all clients whose
subscriptions match that notification.  This document describes the
<b style="color:black;background-color:#ffff66">Elvin</b> <b style="color:black;background-color:#a0ffff">Subscription</b> <b style="color:black;background-color:#99ff99">Language</b> and how expressions in this <b style="color:black;background-color:#99ff99">language
</b>are used to select notifications for delivery to clients.<p>

The <b style="color:black;background-color:#ffff66">Elvin</b> server routes notifications to clients which have expressed
interest in that notification.  The client registers its interest with
a <b style="color:black;background-color:#a0ffff">subscription</b> expression, written in the <b style="color:black;background-color:#ffff66">Elvin</b> <b style="color:black;background-color:#a0ffff">Subscription</b> <b style="color:black;background-color:#99ff99">Language</b>.
The <b style="color:black;background-color:#ffff66">elvin</b> server evaluates the <b style="color:black;background-color:#a0ffff">subscription</b> for each notification it
receives and, it the result is (ex: true), delivers it to the client
which registered that <b style="color:black;background-color:#a0ffff">subscription</b>.  Here is an example of a
<b style="color:black;background-color:#a0ffff">subscription</b> expression:<p>


<table width="100%" cellpadding="3"><tr><td bgcolor="EEEEEE">
<pre>(TICKERTAPE == &quot;<b style="color:black;background-color:#ffff66">elvin</b>&quot; || TICKERTAPE == &quot;Chat&quot;) &amp;&amp; ! regex(USER, &quot;[Ss]egall&quot;)</pre>
</td></tr></table>
<p>


This <b style="color:black;background-color:#a0ffff">subscription</b> expression will match any notification whose
<tt>TICKERTAPE</tt> field has the string value &quot;<b style="color:black;background-color:#ffff66">elvin</b>&quot; or &quot;Chat&quot;
except those whose <tt>USER</tt> field also matches the regular
expression &quot;[Ss]egall&quot;.  This <b style="color:black;background-color:#a0ffff">subscription</b> would match the following
notification example:<p>


<table width="100%" cellpadding="3"><tr><td bgcolor="EEEEEE">
<dl><dd>
<pre>TICKERTAPE: &quot;Chat&quot;
USER:       &quot;alice&quot;
TICKERTEXT: &quot;hello sailor&quot;
TIMEOUT:    10
Message-Id: &quot;07cf0b15003409-5i3N7XDKbPVaQ-28cf-22&quot;
</pre>
</dl>
</td></tr></table>
<p>


<p>

but would not match:<p>


<table width="100%" cellpadding="3"><tr><td bgcolor="EEEEEE">
<dl><dd>
<pre>TICKERTAPE: &quot;<b style="color:black;background-color:#ffff66">elvin</b>&quot;
USER:       &quot;bill@segall.net&quot;
TICKERTEXT: &quot;release early&quot;
TIMEOUT:    10
Message-Id: &quot;7c0b1f00540039-i357XNKbDPaQV-8c2f-22&quot;
</pre>
</dl>
</td></tr></table>
<p>

<p>

The names are on the left and are immediately followed by a colon
(eg: TICKERTAPE) and the values are on the right (eg: &quot;Chat&quot;).<p>

The first notification would also match the following expression:<p>


<table width="100%" cellpadding="3"><tr><td bgcolor="EEEEEE">
<dl><dd>
<pre>wildcard(TICKERTEXT, &quot;*[Hh]ello*&quot;) &amp;&amp; TIMEOUT &gt; 5</pre>
</dl>
</td></tr></table>
<p>


<a name="logic">
<h3>Logic</h3>

The evaluation of a <b style="color:black;background-color:#a0ffff">subscription</b> uses Lukasiewicz's tri-state logic
that adds the value <em>bottom</em> (which represents "undecidable"
or "indefinite") to the familiar <em>true</em> and <em>false</em>.
<p>

<table cellpadding="1" cellspacing="0" border="1" width="100%">
  <tr>
    <th colspan="7" bgcolor="#aB1000"><font color="white">
       Lukasiewicz tri-state logic table
    </font></th>
  </tr>
  <tr>
    <td align="center" bgcolor="#eeeeee"><b>A</b></td>
    <td align="center" bgcolor="#eeeeee"><b>B</b></td>
    <td align="center" bgcolor="white" width="1">&nbsp;</td>
    <td align="center" bgcolor="#eeeeee"><b>&nbsp;!&nbsp;A&nbsp;</b></td>
    <td align="center" bgcolor="#eeeeee"><b>&nbsp;A&nbsp;&&&nbsp;B&nbsp;</b></td>
    <td align="center" bgcolor="#eeeeee"><b>&nbsp;A&nbsp;||&nbsp;B&nbsp;</b></td>
    <td align="center" bgcolor="#eeeeee"><b>&nbsp;A&nbsp;^^&nbsp;B&nbsp;</b></td>
  </tr>

  <tr>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">&nbsp;</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">false</td>
  </tr>

  <tr>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">&nbsp;</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">bottom</td>
  </tr>

  <tr>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">&nbsp;</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">true</td>
  </tr>

  <tr>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">&nbsp;</td>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">bottom</td>
  </tr>

  <tr>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">&nbsp;</td>
    <td align="center" bgcolor="white">&nbsp;bottom&nbsp;</td>
    <td align="center" bgcolor="white">&nbsp;bottom&nbsp;</td>
    <td align="center" bgcolor="white">&nbsp;bottom&nbsp;</td>
    <td align="center" bgcolor="white">&nbsp;bottom&nbsp;</td>
  </tr>

  <tr>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">&nbsp;</td>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">bottom</td>
  </tr>

  <tr>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">&nbsp;</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">true</td>
  </tr>

  <tr>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">&nbsp;</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">bottom</td>
    <td align="center" bgcolor="white">bottom</td>
  </tr>

  <tr>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">&nbsp;</td>
    <td align="center" bgcolor="white">true</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">false</td>
    <td align="center" bgcolor="white">false</td>
  </tr>
</table>
<p>

Any <b style="color:black;background-color:#a0ffff">subscription</b> expression that refers to a name that is not present
in the notification being evaluated results in <em>bottom</em>.
<p>

In addition, many of the functions in <b style="color:black;background-color:#ffff66">Elvin</b> have constraints on their
parameters (ie. data type) and have an undefined result should these
constraints not be met.  For example, if <code>begins-with()</code>,
which expects a string parameter is provided with a 32-bit integer
then the result of the function is <em>bottom</em>.
<p>

Notifications are delivered only if the result of <b style="color:black;background-color:#a0ffff">subscription
</b>evaluation is true.
<p>

<a name="names">
<h3> Names </h3>

A name evaluates to its corresponding value in the notification.
Where a name occurs in an expression, during evaluation of a
notification, the value of the name is taken to be the value of
the attribute with the matching name in the notification.  If
the name is not in the notification, its value becomes <em>bottom</em>
(see the previous section on <a href="#logic">logic</a>).<p>

Names may contain only printing ASCII characters (32-126) and are
case-sensitive. Certain characters are treated as special and must be
escaped using a backslash (\) if there are used in a name.  If
a name does not start with an alphabetic character or an underscore
(_) then the name must start with the escape character followed by
the desired first character.<p>

The following characters must be escaped when used in a name:<p>


<table border="1">
<tr>
<th colspan="2" bgcolor="#aB1000">
 <font color="white">Reserved Characters</font>
</th>
<tr>
 <td align="center" bgcolor="#eeeeee"><b>Character</b>
 <td align="center" bgcolor="#eeeeee"><b>Symbol</b>

<tr><td> parentheses <td> <b>(</b>,<b>)</b>
<tr><td> brackets <td> <b>[</b>,<b>]</b>
<tr><td> apostrophe <td> <b>'</b>
<tr><td> quotes <td> <b>&quot;</b>
<tr><td> backslash <td> <b>\</b>
<tr><td> space <td> `<b>&nbsp;</b>'
</table>
<p>


The following are all valid names:

<ul>
<li> fnord
<li> _underscore
<li> \ we\ can\ have\ spaces
<li> \1.0\ Contents
<li> this:is:a:test:
</ul>
<p>

Note that certain operator characters are legal within a name.  So
&quot;pipe=&nbsp;>&nbsp;20&quot; is a valid expression, with the
equal-sign as the last character of the name.  This allows most strings
to be valid names.  It does, however, have two important impacts.
First, names, operators and literals must be separated by whitespace
(as above) and &quot;pipe=>20&quot; is an error.  Second, while names
can contain whitespace, it must be escaped with a backslash, as in
&quot;the\&nbsp;pipe&nbsp;>&nbsp;20&quot;.<p>

<a name="lits">
<h3> Literals </h3>

Within a <b style="color:black;background-color:#a0ffff">subscription</b> expression there are five kinds of literals:<p>

<dl>

<dt>int32

<dd> 32-bit integer literals may be written in octal, decimal or
hexadecimal.  Octal literals must begin with 0 and may only
contain digits from 0 through 7.  Hexadecimal literals begin with
0x and may contain any hexadecimal digit.  All integers are
signed.  The following are legitimate 32-bit integers:

<ul>
<li> 42
<li> 052
<li> -0x2a
</ul>

<dt> int64

<dd> 64-bit integers are written in the same way as 32-bit ones except
that they have a trailing uppercase or lowercase L.  The following
are valid 64-bit integers:

<ul>
<li>0l
<li>0xDeadBeef1sF00dL
</ul>

<dt> real64

<dd> Floating point numbers must include a decimal point and at least one 
digit thereafter.  An exponent is permitted after the decimal digits.
Below are some examples of floating point numbers:

<ul>
<li> -3.14
<li> 6.023e23
<li> 6.67e-11
</ul>

<dt>string

<dd> Strings are any characters enclosed in single or double quotes.  The
standard C escape sequences apply.  Here are some examples of strings:

<ul>
<li> &quot;hello sailor&quot;
<li> &quot;this isn't a \&quot;number\&quot;&quot;
<li> 'this isn\'t a &quot;number&quot;'
<li> &quot;this\nhas\na\nlinefeed&quot;
</ul>

<dt>opaque

<dd> Because no comparison operations which return meaningful results for
opaques are defined in the <b style="color:black;background-color:#a0ffff">subscription</b> <b style="color:black;background-color:#99ff99">language</b>, support for specifying 
opaque constants is neither necessary nor provided.

</dl>

<!--
<a name="whitespace">
<h3> Whitespace </h3>

Names in expressions can have  
-->

<a name="ops">
<h3> Operators </h3>

As alluded to in the examples, expressions may be combined using
logical operators.  The following logical operators (in order of
precedence) are defined:

<dl>

<dt>!

<dd>An expression may be negated by a preceding !.  The negation of
<em>bottom</em> is <em>bottom</em>.


<dt>&amp;&amp;

<dd>A conjunction of two or more expressions is constructed by placing
&amp;&amp; between those expressions.

<dt>^^

<dd>The exclusive-disjunction (injunction?) of two or more expressions
is constructed by placing ^^ between those expressions. 


<dt>||

<dd>A disjunction of two or more expressions is constructed by
placing || between those expressions.

<dt>equality (== and !=)

<dd>Two values may be compared for equality by placing == between them.
Strings may be compared with other strings for equality.  Numbers may
be compared with other numbers for equality.  No equality test is
supported on opaque data.  If a comparison is attempted between
incomparable types or if either of the values being compared refers to
a value not present in the notification, then the result is <em>bottom</em>.
The != operator is the negation of the equality operator.  x != y
is functionally equivalent to ! (x == y).


<dt>inequality (&lt;, &gt; and &lt;=, &gt;=)

<dd>Two numeric values may be compared with other numbers by placing one of
the inequality operators between the values.  If either of the values
is  not a number (or not defined) then the result of the comparison is 
<em>bottom</em>.

</dl>

Simple arithmetic and logical operators are supported too, making
subscriptions like the following possible:<p>

<pre>
   temp &gt; prev-temp + 5
</pre><p>

Arithmetic and logical operators include:<p>

<dl>

<dt>*, / and %

<dd>The multiplication, division and modulus operators have higher
precedence than addition and subtraction but lower precedence than the
bitwise operators.  Values are promoted to from int32 to int64 to real64 
as necessary to represent the result.

<dt>+ and -

<dd>The addition and subtraction operators have higher precedence than the
logical operators.<p>

The bitwise operators are only defined on the two integer types.
If they are applied to other types then the result is @samp{undefined}
which will result in the smallest enclosing logical evaluating to
<em>bottom</em>.

<dt>&lt;&lt;, &gt;&gt; and &gt;&gt;&gt;

<dd>Shift operators  the value on the left in the direction of the
arrows by the value on the right number of bits.  The &gt;&gt; operator 
does a signed  right whereas &gt;&gt;&gt; does a logical  right
(it always shifts in zeros).

<dt>&amp;, ^ and |

<dd>In order of precedence, the bitwise &amp;, ^ and | operators operate
on the values on either side of the operator.

<dt>~

<dd>Performs bitwise inversion.

</dl>

<a name="funcs">
<h3> Functions </h3>

The following functions take one argument and return a logic value.
If the value of name is of the given type, they evaluate to
<em>true</em>, if name is not present in the notification, they
evaluate to <em>bottom</em>, otherwise the evaluate to <em>false</em>.

<ul>
<li> int32(name)
<li> int64(name)
<li> real64(name)
<li> string(name)
<li> opaque(name)
<li> nan(name)
</ul>

<a name="strcomps">
<h3> String Comparisons </h3>

The string comparison functions test strings in various ways.  They
test the first argument, which must name a value in the notification,
to see if it matches any of the subsequent arguments.

<dl>

<dt> begins-with(name, string, ...)

<dd> Returns true if the value of name is a string and begins with any
of the string arguments, <em>bottom</em> if the value name is not a
string or not present in the notification and false otherwise.


<dt>contains(name, string, ...)

<dd> Returns true if the value of name is a string and it contains any 
of the string arguments, <em>bottom</em> if the value name is not a
string or not present in the notification and false otherwise.


<dt>ends-with(name, string, ...)

<dd> Returns true if the value of name is a string and ends with any
of the string arguments, <em>bottom</em> if the value name is not a
string or not present in the notification and false otherwise.


<dt>wildcard(name, string, ...)

<dd> The strings are interpreted as wildcard (a.k.a. glob, filename,
or shell expansions) expressions as defined by the
<a href="wildcard.html">wildcard specification</a>.


<dt>regex(name, string, ...)

<dd> The strings are interpreted as regular expressions. That's
<a href="regex.html">POSIX 1003.2 regular expressions</a>
with UTR #18 Level 1 compatible extensions for Unicode.

</dl>

<a name="strtrans">
<h3> String Transformations </h3>

The following functions may be used perform a limited set of
transformations in order to simplify string comparisons.

<dl>

<dt> fold-case(string)

<dd> Transform string to folded case (typically the same as lower case).


<dt> decompose(string)

<dd> Performs canonical decomposition of string and returns the resulting
string value.

<dt> decompose-compat(value)

<dd> Performs compatible (and canonical) decomposition of string and
returns the resulting string value.

</dl>

<a name="notif">
<h3> Notification and Name Functions </h3>

<dl>
<dt> require(name)

<dd> Returns true if name is present in the notification, <em>bottom</em> 
     otherwise.


<dt> equals(name, value, ...)

<dd> Returns true if the name is equal to any of the values.


<dt> size(name)

<dd> If name is a string then size() returns the number of
characters in the string.  If name is an opaque then it returns the
number of bytes in the opaque.  Returns bottom for all other data
types.

</dl>

&nbsp;<p>
&nbsp;<p>

<p>
<center> 
<img src="http://elvin.dstc.com/images/red-black-narrow.gif" border="0"
		 alt="| | | | | | | | | | | | | | | | | | | |">
</center> 
<h6 align="center">Copyright &copy; 1998-2003 Distributed Systems Technology Centre</h6>
</body>
</html>
