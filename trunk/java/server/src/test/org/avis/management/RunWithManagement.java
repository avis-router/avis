package org.avis.management;import java.io.IOException;import org.avis.federation.FederationManager;import org.avis.federation.FederationOptionSet;import org.avis.logging.Log;import org.avis.management.ManagementManager;import org.avis.management.ManagementOptionSet;import org.avis.router.Router;import org.avis.router.RouterOptionSet;import org.avis.router.RouterOptions;import static org.avis.logging.Log.alarm;import static org.avis.logging.Log.info;import static org.avis.logging.Log.warn;public class RunWithManagement{  public static void main (String [] args) throws Exception  {    Log.enableLogging (Log.DIAGNOSTIC, true);    // Log.enableLogging (Log.TRACE, true);    Log.info ("Starting Avis with web manager", RunWithManagement.class);        RouterOptionSet routerOptionSet = new RouterOptionSet ();        routerOptionSet.inheritFrom (FederationOptionSet.OPTION_SET);    routerOptionSet.inheritFrom (ManagementOptionSet.OPTION_SET);        RouterOptions config = new RouterOptions (routerOptionSet);        config.set ("Port", 29170);    config.set ("Send-Queue.Drop-Policy", "oldest");        config.set ("Federation.Activated", true);    config.set ("Federation.Connect[Public]", "ewaf://0.0.0.0");    config.set ("Federation.Provide[Public]", "TRUE");    config.set ("Federation.Subscribe[Public]",                 "require (Test) || require (Message)");            config.set ("Management.Activated", true);    config.set ("Management.Listen", "http://0.0.0.0:8017");    config.set ("Management.Admin-Name", "admin");    config.set ("Management.Admin-Password", "foo2");//    config.set ("TLS.Keystore", "avis-router.keystore");//    config.set ("TLS.Keystore-Passphrase", "avis-router");//    config.setRelativeDirectory ("tmp");        Router router = new Router (config);        new FederationManager (router, config);    new ManagementManager (router, config);        // create an exception    info ("Hello", RunWithManagement.class);    warn ("There was a spurious warning that in fact you may totally ignore",           RunWithManagement.class, new IOException ("A supurious IO exception with a fairly long message not adding any real value"));        alarm ("Alarum!",           RunWithManagement.class, new IOException ("An error of some sort"));  }}