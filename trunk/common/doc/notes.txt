TODO

Releases

Server 1.1

* look into whether server can store hashed keys only and avoid
  hashing them on each match. See Connection.matchSubscriptions ()
* OS X: installation in /usr/local means getting blown away on system
  reinstall. should we go in /opt?
* DONE: look at retiring ".net" and maybe "org." in package names.
  maybe "org.elvin.avis"?
* DEB, Solaris: look at je4 packages dir
* windows JRE does not have -server, need to add installer option
* thread pool size option?
* DONE: remove DSTO DFC log - use slf4j

Client 1.0

* DONE: test close in callback
* DONE: remove multiplex codec: CumulativeProtocolDecoder and ProtocolCodecFilter
* DONE: security -> ec/ep. add option for text keys
* DONE: events: connected etc

Not allocated
--------------

Client

* synchronous reconnect/redirect? block for up to x secs before closing
* better reporting for going over connection limits (e.g. max subs)
* unotify
* auto connect/reconnect
* WONT DO: could use fast collection for client subscription map
* DONE: keepalives? connection test
* lots of ec/ep options
* MAYBE: replace IOException witn RuntimeIOException? relates/affected
  by async idea
* discovery
* async/future-based messaging in client. use futures to track responses.
* BUG: ec hangs on Presence-Protocol from public.elvin.org. Takes a long time
  to close connection. possibly related to use of "tee" on command line
* DONE: think about putting expected reply type in XID messages: would
  remove need for param in sendAndReceive ().
* DONE: Key I/O
* DONE: re org into client, server and common projects?

Server

* what happens when sending ntfn to client that's too big?
* DONE: sub expr error reporting as in sec 6.3 and 7.4.2 (NACK codes)
* test SecRqst: test_sync_modify_keys fails (should NACK empty keys)
* profile performance
* switch to launchd for OS X http://en.wikipedia.org/wiki/Launchd
  (10.4 only, but Java 5 only works there anyway). /Library/LaunchDaemons/ 
* partly done: router-wide options that allow client to grow connection
  footprint such like as keys, subscriptions. client can still easily kill
  server using long subs atm. keys attack window reduced but still may be
  possible using sub/ntfn keys plus long keys. need to check max size of key
  data.
* add message logging via MINA filter, remove current crusty approach
* notification dropping incl DropWarn
* write a multi-threaded test thrasher to test consistency
* write a multi-threaded test thrasher to try to crash server
* write multithreaded "fuzz" test: fire random messages
* how do we handle other langs in SVN? do we need to? e.g. should
  Python binding be a separate project?

* DONE: constant pool for Const?
* DONE: connection options
* DONE: check client version numbers
* DONE: ec/ep
* DONE: Klaus: add interface selection
* DONE: Ian's suggestions + diagrams
* DONE: web site PR: why use Avis? examples see why.txt
* DONE: pkg permissions
* DONE: case-independent options
* DONE: full test with Sticker
* DONE: need separate VM's for MaliciousClient test
* DONE: roadmap. ewafd-equivalent. built in?
* DONE: no. do we need SSL/TLS in 1.0?
* DONE: add Unix and windows service wrappers and installers
* DONE: add basic settings to become net ready: limit connection counts,
  subs, bandwidth etc to avoid DOS attacks possible to OOM the server by
  flooding it with fairly large packets.
* DONE: basic enforcment of connection options
* DONE: test performance after MINA 1.0 port. seems to be slower on
  test_threaded_clients (old 6s, new 12s)
* DONE: consistency: use multi-reader setup for changes to ensure
  e.g. a notification not delivered for an old sub already ack'ed.
* DONE: port to MINA 1.0.0. total API change, no porting guide?!
  IoSession seems to replace ProtocolSession. see
  http://svn.apache.org/viewvc/directory/trunks/mina/example/src/main/java/org/apache/mina/example/sumup/

Notes
----
* JUTestServerAttack: Client can exhaust default server heap with
  2K max-sub-count x 3K max-sub-length
* Using fastutil increased server JAR from 334K to 446K.

Issues for David

* DONE: What is new router.coalesce-delay?
* DONE: Can I put je4 in distro? don't need it
* DONE:elvind does not do byte_size_max
* DONE:what is QosRqst? mentioned in 7.5 for changing options

Changelog
----------------------------------------------------------------------

to find revision of tag:

svn log --stop-on-copy https://svn.sourceforge.net/svnroot/avis/tags/release_0.4

to create change log since tag

svn2cl -r XXXX:HEAD https://svn.sourceforge.net/svnroot/avis/trunk


Client/server component split

common
  src
    main
      org.avis.common
      org.avis.io
      org.avis.security
      org.avis.util
    test
      org.avis.security
    misc
      gpl_java_header.txt
  lib
    mina ...
  build
    avis-common.jar
client
  avis-client.properties
  src
    main
      org.avis.client
      org.avis.tools
    test
      org.avis.client
  bin
    ec
    ep
  build
    avis-client.jar (contains common classes)
    avis-tools.jar
  classes
    main
    test

server
  avis-server.properties
  src
    org.avis.server
    org.avis.subscription
  bin
    avisd
  packaging
  build
    avis-router.jar

Release client by copying common + client to branches/client/release_0.1
Release server by copying common + server to branches/server/release_1.1

Server -> avis-server distro
Client -> avis-client distro (src, javadoc, jar, examples)
       -> avis-tools distro (ec, ep)
